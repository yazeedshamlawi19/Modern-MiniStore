<?php
/* 
  تضمين ملف الإعدادات العامة للتطبيق
  يحتوي على الثوابت مثل BASE_URL وإعدادات أخرى
*/
require_once __DIR__ . '/config.php';

/* 
  التحقق إذا كانت الجلسة غير مفعّلة
  وإذا لم تكن مفعّلة نقوم بتشغيلها
  لأننا سنقوم بالتعامل مع بيانات الجلسة
*/
if (session_status() === PHP_SESSION_NONE) session_start();


/* 
  حذف بيانات تسجيل دخول المسؤول فقط من الجلسة
  هذا يعني أن المستخدم العادي (إن وجد) لا يتأثر
*/
unset($_SESSION['admin']);

/* 
  تدمير الجلسة بالكامل
  هذا يحذف جميع بيانات الجلسة من الخادم
  ويُنهي أي حالة تسجيل دخول
*/
session_destroy();


/* 
  تحديد المسار الأساسي للموقع
  إذا كان BASE_URL معرفًا نستخدمه
  وإلا نستخدم المسار الجذري /
*/
$base = defined('BASE_URL') ? BASE_URL : '/';

/* 
  إعادة توجيه المستخدم إلى الصفحة الرئيسية
  بعد تسجيل الخروج من حساب المسؤول
*/
header('Location: ' . $base . 'index.php');

/* 
  إيقاف تنفيذ أي كود بعد إعادة التوجيه
  لضمان عدم تنفيذ تعليمات إضافية
*/
exit;
