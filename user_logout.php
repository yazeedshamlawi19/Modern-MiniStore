<?php
// تحميل ملف الإعدادات العامة للمشروع
// (يحتوي على BASE_URL، إعدادات المنطقة الزمنية، إلخ)
require_once __DIR__ . '/config.php';

// التحقق إذا كانت الجلسة غير مفعّلة
// session_status() === PHP_SESSION_NONE يعني أنه لا توجد جلسة حالياً
if (session_status() === PHP_SESSION_NONE) {
    // بدء جلسة جديدة حتى نتمكن من التعامل مع $_SESSION
    session_start();
}

// تفريغ جميع بيانات الجلسة
// هذا السطر يحذف كل المتغيرات المخزنة داخل $_SESSION
$_SESSION = [];

// إنهاء الجلسة بشكل كامل من السيرفر
// هذا يمنع استخدام نفس session ID مرة أخرى
session_destroy();

// تحديد الرابط الأساسي للمشروع
// في حال كان BASE_URL معرفاً في config.php يتم استخدامه
// وإلا يتم الرجوع إلى الجذر '/'
$base = defined('BASE_URL') ? BASE_URL : '/';

// إعادة توجيه المستخدم إلى الصفحة الرئيسية بعد تسجيل الخروج
header('Location: ' . $base . 'index.php');

// إيقاف تنفيذ السكربت بعد التحويل
exit;
