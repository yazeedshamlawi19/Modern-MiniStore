<?php
/* 
  ØªØ¶Ù…ÙŠÙ† Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
  ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø«ÙˆØ§Ø¨Øª Ù…Ø«Ù„:
  - ADMIN_USER
  - ADMIN_PASS
  - BASE_URL
*/
require_once __DIR__ . '/config.php';

/* 
  Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø©
  Ù„Ø£Ù†Ù†Ø§ Ø³Ù†Ø®Ø²Ù† Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¯Ø§Ø®Ù„ $_SESSION
*/
if (session_status() === PHP_SESSION_NONE) session_start();


/* 
  Ù…ØªØºÙŠØ± Ù„ØªØ®Ø²ÙŠÙ† Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
  Ø³ÙŠØªÙ… Ø¹Ø±Ø¶Ù‡ Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø®Ø§Ø·Ø¦Ø©
*/
$err = '';

/* 
  Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ù†ÙˆØ¹ POST
  Ø£ÙŠ Ø£Ù† Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡
*/
if ($_SERVER['REQUEST_METHOD'] === 'POST') {

  /* 
    Ù‚Ø±Ø§Ø¡Ø© Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
    trim Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ±Ø§ØºØ§Øª Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©
    ?? '' Ù„ØªÙØ§Ø¯ÙŠ Ø§Ù„Ø®Ø·Ø£ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ø­Ù‚Ù„ Ù…ÙˆØ¬ÙˆØ¯
  */
  $user = trim($_POST['username'] ?? '');

  /* 
    Ù‚Ø±Ø§Ø¡Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
    trim Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ±Ø§ØºØ§Øª Ø§Ù„Ø²Ø§Ø¦Ø¯Ø©
  */
  $pass = trim($_POST['password'] ?? '');

  /* 
    Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø© Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙÙŠ config.php
    Ù‡Ø°Ø§ Ù†Ø¸Ø§Ù… Ù…Ø¨Ø³Ø· (ØªØ¹Ù„ÙŠÙ…ÙŠ) Ø¨Ø¯ÙˆÙ† Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª
  */
  if ($user === ADMIN_USER && $pass === ADMIN_PASS) {

    /* 
      ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¬Ù„Ø³Ø©
      logged_in ØªÙØ³ØªØ®Ø¯Ù… Ù„Ù„ØªØ­Ù‚Ù‚ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„
    */
    $_SESSION['admin'] = [
      'username'  => ADMIN_USER,
      'logged_in' => true
    ];

    /* 
      Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
      Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­
    */
    header('Location: admin_dashboard.php');

    /* 
      Ø¥ÙŠÙ‚Ø§Ù ØªÙ†ÙÙŠØ° Ø£ÙŠ ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡
    */
    exit;

  } else {

    /* 
      ÙÙŠ Ø­Ø§Ù„ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©
      ÙŠØªÙ… ÙˆØ¶Ø¹ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù„Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„ØµÙØ­Ø©
    */
    $err = 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.';
  }
}
?>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <!-- 
    ØªØ­Ø¯ÙŠØ¯ ØªØ±Ù…ÙŠØ² Ø§Ù„ØµÙØ­Ø© Ù„Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
  -->
  <meta charset="UTF-8">

  <!-- 
    Ø¬Ø¹Ù„ Ø§Ù„ØµÙØ­Ø© Ù…ØªØ¬Ø§ÙˆØ¨Ø© Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
  -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 
    Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
  -->
  <title>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</title>

  <!-- 
    Ø±Ø¨Ø· Ù…Ù„Ù Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹
  -->
  <link rel="stylesheet" href="assets/style.css">
</head>

<body 
  style="
    background: linear-gradient(145deg, #5b2abf, #7d4dff);
    color: #fff;
    font-family: 'Cairo', sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
  "
>
  <!-- 
    Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
    method=post Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù† Ù†Ø³Ø¨ÙŠÙ‹Ø§
  -->
  <form 
    method="post"
    style="
      background:rgba(255,255,255,0.1);
      padding:30px;
      border-radius:10px;
    "
  >
    <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ -->
    <h2 style="text-align:center;">ðŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h2>

    <!-- 
      Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
      ØªÙØ·Ø¨Ø¹ ÙÙ‚Ø· ÙÙŠ Ø­Ø§Ù„ ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    -->
    <?php if($err): ?>
      <p style="color:#f87171;text-align:center;">
        <?php echo $err; ?>
      </p>
    <?php endif; ?>

    <!-- Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <label>
      Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…<br>
      <input type="text" name="username" required>
    </label>
    <br><br>

    <!-- Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
    <label>
      ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±<br>
      <input type="password" name="password" required>
    </label>
    <br><br>

    <!-- Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ -->
    <button 
      type="submit"
      style="
        background:#a78bfa;
        color:#fff;
        padding:10px 20px;
        border:none;
        border-radius:5px;
      "
    >
      ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    </button>
  </form>
</body>
</html>
